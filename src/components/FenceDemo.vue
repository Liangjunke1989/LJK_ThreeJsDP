<template>
  <div class="fence-demo">
    <div class="three-container" ref="threeContainer"></div>
    
    <div class="info-panel">
      <h3>å›´æ æ˜¾ç¤ºéšè—æ¼”ç¤º</h3>
      <p class="description">
        æ¼”ç¤ºå›´æ çš„æ˜¾ç¤ºéšè—åŠŸèƒ½ï¼Œé€šè¿‡XMLé…ç½®æ–‡ä»¶æ§åˆ¶
      </p>
      
      <div class="demo-info">
        <h4>åŠŸèƒ½ç‰¹æ€§</h4>
        <ul>
          <li>âœ… é€šè¿‡XMLé…ç½®æ–‡ä»¶æ§åˆ¶å›´æ æ˜¾ç¤ºéšè—</li>
          <li>âœ… å®æ—¶åˆ‡æ¢å›´æ å¯è§æ€§</li>
          <li>âœ… åŠ¨æ€ä¿®æ”¹å›´æ é¢œè‰²</li>
          <li>âœ… é…ç½®è‡ªåŠ¨ä¿å­˜å’Œå¯¼å‡º</li>
          <li>âœ… æ”¯æŒé…ç½®é‡ç½®åŠŸèƒ½</li>
        </ul>
      </div>
      
      <div class="xml-config">
        <h4>XMLé…ç½®ç¤ºä¾‹</h4>
        <pre>
&lt;fence&gt;
    &lt;visible&gt;true&lt;/visible&gt;
    &lt;points&gt;
        &lt;point&gt;
            &lt;x&gt;-26.69&lt;/x&gt;
            &lt;y&gt;0.1&lt;/y&gt;
            &lt;z&gt;14.62&lt;/z&gt;
        &lt;/point&gt;
        ...
    &lt;/points&gt;
    &lt;color&gt;rgb(51, 188, 176)&lt;/color&gt;
&lt;/fence&gt;
        </pre>
      </div>
      
      <div class="usage-guide">
        <h4>ä½¿ç”¨æ–¹æ³•</h4>
        <ol>
          <li>ä¿®æ”¹XMLé…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;visible&gt;</code>æ ‡ç­¾</li>
          <li>è®¾ç½®ä¸º<code>true</code>æ˜¾ç¤ºå›´æ ï¼Œ<code>false</code>éšè—å›´æ </li>
          <li>é‡æ–°åŠ è½½åœºæ™¯æˆ–ä½¿ç”¨æ§åˆ¶é¢æ¿å®æ—¶åˆ‡æ¢</li>
          <li>é…ç½®ä¼šè‡ªåŠ¨ä¿å­˜åˆ°XMLæ–‡ä»¶ä¸­</li>
        </ol>
      </div>
      
      <div class="control-tips">
        <h4>æ§åˆ¶æç¤º</h4>
        <ul>
          <li>ğŸ–±ï¸ ç‚¹å‡»å›´æ åŒºåŸŸæŸ¥çœ‹ç‰©ä½“ä¿¡æ¯</li>
          <li>ğŸ›ï¸ ä½¿ç”¨æ§åˆ¶é¢æ¿å®æ—¶åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€</li>
          <li>ğŸ¨ å¯ä»¥ä¿®æ”¹å›´æ é¢œè‰²å’Œé€æ˜åº¦</li>
          <li>ğŸ’¾ é…ç½®ä¿®æ”¹åè®°å¾—ä¿å­˜</li>
        </ul>
      </div>
    </div>
    
    <!-- å›´æ æ§åˆ¶é¢æ¿ -->
    <fenceControlPanel />
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue';
import useThree from '@/hooks/useThree';
import fenceControlPanel from '@/components/fenceControlPanel.vue';

const threeContainer = ref<HTMLElement>();

onMounted(async () => {
  if (threeContainer.value) {
    threeContainer.value.id = 'fenceDemo';
    const threeInstance = useThree('fenceDemo');
    
    // ç­‰å¾…åˆå§‹åŒ–å®Œæˆ
    await new Promise(resolve => setTimeout(resolve, 2000));
    
    console.log('ğŸ—ï¸ å›´æ æ¼”ç¤ºå·²åŠ è½½');
    console.log('ğŸ’¡ ä½¿ç”¨æ§åˆ¶é¢æ¿åˆ‡æ¢å›´æ æ˜¾ç¤ºçŠ¶æ€');
  }
});
</script>

<style scoped>
.fence-demo {
  width: 100vw;
  height: 100vh;
  display: flex;
  background: #1a1a1a;
  color: white;
}

.three-container {
  flex: 1;
  height: 100%;
  background: #000;
}

.info-panel {
  width: 400px;
  padding: 20px;
  background: #2a2a2a;
  border-left: 1px solid #444;
  overflow-y: auto;
}

.info-panel h3 {
  margin: 0 0 10px 0;
  color: #87CEEB;
  font-size: 18px;
}

.description {
  margin: 0 0 20px 0;
  color: #ccc;
  font-size: 14px;
  line-height: 1.4;
}

.demo-info,
.xml-config,
.usage-guide,
.control-tips {
  margin-bottom: 25px;
  background: #333;
  border-radius: 6px;
  padding: 15px;
}

.demo-info {
  border-left: 3px solid #4CAF50;
}

.xml-config {
  border-left: 3px solid #2196F3;
}

.usage-guide {
  border-left: 3px solid #FF9800;
}

.control-tips {
  border-left: 3px solid #9C27B0;
}

.info-panel h4 {
  margin: 0 0 15px 0;
  color: #fff;
  font-size: 14px;
  border-bottom: 1px solid #444;
  padding-bottom: 5px;
}

.info-panel ul,
.info-panel ol {
  margin: 0;
  padding-left: 20px;
  color: #ccc;
  font-size: 13px;
  line-height: 1.5;
}

.info-panel li {
  margin: 8px 0;
}

.xml-config pre {
  background: #1a1a1a;
  border-radius: 4px;
  padding: 10px;
  font-size: 11px;
  color: #00ff00;
  overflow-x: auto;
  margin: 0;
  font-family: 'Courier New', monospace;
}

.usage-guide code {
  background: #444;
  padding: 2px 4px;
  border-radius: 3px;
  font-family: 'Courier New', monospace;
  color: #ffd700;
}
</style> 